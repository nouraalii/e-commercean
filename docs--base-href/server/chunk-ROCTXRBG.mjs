import './polyfills.server.mjs';
import{a as F,b as P}from"./chunk-4AMEMC65.mjs";import"./chunk-GTSSCL6B.mjs";import{e as D}from"./chunk-PATWWLDP.mjs";import"./chunk-OLSM6CU6.mjs";import{o as E}from"./chunk-S22GBDN5.mjs";import{$ as S,Gb as l,Hb as x,Ib as v,La as g,Nb as I,Pa as s,Pb as T,Tb as h,Vb as b,X as C,hb as f,ja as p,ka as u,nb as k,ob as w,pb as r,qb as n,rb as m,ub as y,yb as d,zb as _}from"./chunk-HXINP7UO.mjs";import"./chunk-VVCT4QZE.mjs";var V=(c,a)=>a.product.id,$=c=>["/order",c];function B(c,a){if(c&1){let o=y();r(0,"div",5)(1,"div",7),m(2,"img",8),n(),r(3,"div",9)(4,"div")(5,"h3",10),l(6),n(),r(7,"p",11),l(8),h(9,"currency"),n(),r(10,"button",12),d("click",function(){let e=p(o).$implicit,i=_();return u(i.removeItem(e.product.id))}),m(11,"i",13),n()(),r(12,"div",14)(13,"span",15),d("click",function(){let e=p(o).$implicit,i=_();return u(i.updateCount(e.product.id,e.count+1))}),m(14,"i",16),n(),r(15,"span"),l(16),n(),r(17,"span",15),d("click",function(){let e=p(o).$implicit,i=_();return u(i.updateCount(e.product.id,e.count-1))}),m(18,"i",17),n()()()()}if(c&2){let o=a.$implicit;s(2),f("src",o.product.imageCover,g)("alt",o.product.title),s(4),x(o.product.title),s(2),v("Price:",b(9,5,o.price,"GBP"),""),s(8),x(o.count)}}var Q=(()=>{let a=class a{constructor(){this._CartService=C(F),this._ToastrService=C(P),this.cartDetails={}}ngOnInit(){this._CartService.getProductsCart().subscribe({next:t=>{console.log(t.data),this.cartDetails=t.data}})}removeItem(t){this._CartService.deleteSpecificCartItem(t).subscribe({next:e=>{console.log(e),this.cartDetails=e.data,this._ToastrService.success("Item removed from Cart","FreshCart"),this._CartService.cartNumber.next(e.numOfCartItems)}})}updateCount(t,e){e>0&&this._CartService.updateProductQuantity(t,e).subscribe({next:i=>{console.log(i),this.cartDetails=i.data,this._ToastrService.success("Product count increased successfully","FreshCart")}})}clearItem(){this._CartService.clearCart().subscribe({next:t=>{console.log(t),t.message==="success"&&(this.cartDetails={},this._CartService.cartNumber.next(0))}})}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=S({type:a,selectors:[["app-cart"]],standalone:!0,features:[I],decls:13,vars:7,consts:[[1,"bg-main-light","shadow","rounded-4","p-4","my-4","mt-5","w-75","mx-auto"],[1,"d-flex","justify-content-between","align-items-center"],[1,"h2"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"text-main"],[1,"row","mb-2","border-bottom"],[1,"btn-main",3,"routerLink"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","justify-content-between","align-items-center"],[1,"h5"],[1,"text-main","m-0"],[1,"text-danger","btn","p-0","cursor-pointer",3,"click"],[1,"fa-solid","fa-trash"],[1,"d-flex","align-i","tems-center","gap-2"],[1,"text-main","cursor-pointer",3,"click"],[1,"fa-solid","fa-square-plus","fa-2xl"],[1,"fa-solid","fa-square-minus","fa-2xl"]],template:function(e,i){e&1&&(r(0,"section",0)(1,"div",1)(2,"h1",2),l(3,"Shop Cart:"),n(),r(4,"button",3),d("click",function(){return i.clearItem()}),l(5,"Clear Cart"),n()(),r(6,"p",4),l(7),h(8,"currency"),n(),k(9,B,19,8,"div",5,V),r(11,"button",6),l(12,"Order"),n()()),e&2&&(s(7),v("Total Cart Price:",b(8,2,i.cartDetails.totalCartPrice,"GBP"),""),s(2),w(i.cartDetails.products),s(2),f("routerLink",T(5,$,i.cartDetails._id)))},dependencies:[E,D]});let c=a;return c})();export{Q as CartComponent};
