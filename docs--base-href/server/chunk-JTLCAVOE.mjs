import './polyfills.server.mjs';
import{a as q,b as H}from"./chunk-NCMJKXKF.mjs";import{a as U}from"./chunk-FSUM34LR.mjs";import{a as K}from"./chunk-6DKTK57Q.mjs";import{a as O,b as J}from"./chunk-4AMEMC65.mjs";import"./chunk-GTSSCL6B.mjs";import{a as R,c as $,g as z,l as G}from"./chunk-P62YSWON.mjs";import{e as j}from"./chunk-PATWWLDP.mjs";import"./chunk-OLSM6CU6.mjs";import{o as N}from"./chunk-S22GBDN5.mjs";import{$ as P,Gb as l,Hb as _,Ib as M,Jb as A,Kb as B,La as y,Lb as I,Nb as L,Ob as V,Pa as o,Pb as D,Tb as m,Vb as p,X as d,fb as T,hb as x,ja as g,jb as W,ka as v,lb as k,mb as F,nb as S,ob as C,pb as s,qb as a,rb as u,ub as E,yb as w,zb as h}from"./chunk-HXINP7UO.mjs";import"./chunk-VVCT4QZE.mjs";var Q=(r,n)=>n.id,X=r=>["/details",r],Y=()=>[1,2,3,4,5];function Z(r,n){r&1&&(s(0,"span"),u(1,"i",15),a())}function ee(r,n){r&1&&u(0,"i",12)}function te(r,n){if(r&1){let i=E();s(0,"div",4)(1,"div",5)(2,"div",6)(3,"i",7),w("click",function(e){let c=g(i).$implicit,b=h();return v(b.toggleWishlist(e,c))}),a(),u(4,"img",8),s(5,"h3",9),l(6),m(7,"termtext"),a(),s(8,"h4",10),l(9),m(10,"termtext"),a(),s(11,"div",11)(12,"span"),l(13),m(14,"currency"),a(),s(15,"div"),S(16,Z,2,0,"span",null,F),T(18,ee,1,0,"i",12),s(19,"span",13),l(20),a()()()(),s(21,"button",14),w("click",function(){let e=g(i).$implicit,c=h();return v(c.addCart(e.id))}),l(22,"Add to Cart"),a()()()}if(r&2){let i=n.$implicit,t=h();o(2),x("routerLink",D(21,X,i.id)),o(),W("fa-solid",t.wishlist.has(i.id))("fa-regular",!t.wishlist.has(i.id)),o(),x("src",i.imageCover,y)("alt",i.title),o(2),_(p(7,12,i.category.name,1)),o(3),_(p(10,15,i.title,2)),o(4),M("",p(14,18,i.price,"GBP")," "),o(3),C(V(23,Y).slice(0,i.ratingsAverage)),o(2),k(18,i.ratingsAverage%1!==0?18:-1),o(2),_(i.ratingsAverage)}}var _e=(()=>{let n=class n{constructor(){this._ProductService=d(U),this._ToastrService=d(J),this._CartService=d(O),this._WishlistService=d(K),this.productList=[],this.wishlist=new Set,this.text=""}ngOnInit(){this.allProductSub=this._ProductService.getProducts().subscribe({next:t=>{console.log(t),this.productList=t.data}}),this.wishlistSub=this._WishlistService.getProductsWishlist().subscribe({next:t=>{console.log(t),this.wishlist=new Set(t.data.map(e=>e.id))}})}ngOnDestroy(){this.allProductSub?.unsubscribe(),this.wishlistSub?.unsubscribe()}addCart(t){this._CartService.addProductToCart(t).subscribe({next:e=>{console.log(e),this._ToastrService.success(e.message,"FreshCart")}})}toggleWishlist(t,e){t.stopPropagation(),this.wishlist.has(e.id)?this._WishlistService.deleteSpecificWishlistItem(e.id).subscribe({next:()=>{this.wishlist.delete(e.id),this._ToastrService.success("Removed from wishlist")}}):this._WishlistService.addProductToWishlist(e.id).subscribe({next:()=>{this.wishlist.add(e.id),this._ToastrService.success("Added to wishlist")}})}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=P({type:n,selectors:[["app-product"]],standalone:!0,features:[L],decls:8,vars:4,consts:[[1,"my-5"],[1,"text-center","text-main"],["type","search","placeholder","Search by Name....",1,"form-control","w-75","mx-auto","my-4",3,"ngModelChange","ngModel"],[1,"row","g-3"],[1,"col-md-3"],[1,"product","p-2"],[3,"routerLink"],[1,"fa-heart","fa-xl","text-main",3,"click"],[1,"w-100",3,"src","alt"],[1,"small","text-main"],[1,"h6"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fa-solid","fa-star-half-stroke","rating-color"],[1,"text-muted"],[1,"btn-main","w-100",3,"click"],[1,"fas","fa-star","rating-color"]],template:function(e,c){e&1&&(s(0,"section",0)(1,"h2",1),l(2,"All Products:"),a(),s(3,"input",2),I("ngModelChange",function(f){return B(c.text,f)||(c.text=f),f}),a(),s(4,"div",3),S(5,te,23,24,"div",4,Q),m(7,"search"),a()()),e&2&&(o(3),A("ngModel",c.text),o(2),C(p(7,1,c.productList,c.text)))},dependencies:[G,R,$,z,q,H,N,j]});let r=n;return r})();export{_e as ProductComponent};
