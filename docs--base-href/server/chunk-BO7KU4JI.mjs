import './polyfills.server.mjs';
import{a as N}from"./chunk-LYRTE5YL.mjs";import{a as x,b as F,c as q,d as k,h as A,i as D,j as R,k as G,m as B}from"./chunk-P62YSWON.mjs";import{d as L,e as T}from"./chunk-PATWWLDP.mjs";import"./chunk-OLSM6CU6.mjs";import{j as b}from"./chunk-S22GBDN5.mjs";import{$ as S,Gb as d,Nb as y,Pa as m,Qb as w,X as v,fb as c,hb as f,lb as u,pb as r,qb as o,rb as C,yb as E,zb as h}from"./chunk-HXINP7UO.mjs";import"./chunk-VVCT4QZE.mjs";var M=(i,t)=>({"is-valid":i,"is-invalid":t});function V(i,t){i&1&&(r(0,"p",13),d(1,"Email is required"),o())}function j(i,t){i&1&&(r(0,"p",13),d(1,"Enter valid email"),o())}function z(i,t){if(i&1&&(r(0,"div",6),c(1,V,2,0,"p",13)(2,j,2,0,"p",13),o()),i&2){let _,n,s=h();m(),u(1,(_=s.loginForm.get("email"))!=null&&_.getError("required")?1:-1),m(),u(2,(n=s.loginForm.get("email"))!=null&&n.getError("email")?2:-1)}}function I(i,t){i&1&&(r(0,"p",13),d(1,"password is required"),o())}function U(i,t){i&1&&(r(0,"p",13),d(1,"Enter valid password"),o())}function $(i,t){if(i&1&&(r(0,"div",6),c(1,I,2,0,"p",13)(2,U,2,0,"p",13),o()),i&2){let _,n,s=h();m(),u(1,(_=s.loginForm.get("password"))!=null&&_.getError("required")?1:-1),m(),u(2,(n=s.loginForm.get("password"))!=null&&n.getError("password")?2:-1)}}function H(i,t){i&1&&C(0,"i",12)}var Z=(()=>{let t=class t{constructor(){this._AuthService=v(N),this._FormBuilder=v(G),this._Router=v(L),this.msgError="",this.isLoading=!1,this.loginForm=this._FormBuilder.group({email:[null,[F.required,F.email]],password:[null,[F.required,F.pattern(/^\w{6,}$/)]]})}loginSubmit(){this.loginForm.valid&&this._AuthService.setLoginForm(this.loginForm.value).subscribe({next:n=>{console.log(n),n.message==="success"&&(localStorage.setItem("userToken",n.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])),this.isLoading=!0},error:n=>{this.msgError=n.error.message,console.log(n),this.isLoading=!1}})}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=S({type:t,selectors:[["app-login"]],standalone:!0,features:[y],decls:20,vars:13,consts:[[1,"bg-main-light","shadow","p-2","my-4","rounded-4","p-4"],[1,"h2","text-main"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email",1,"fw-bold","text-capitalize"],["type","email","id","email","formControlName","email",1,"form-control",3,"ngClass"],[1,"text-danger","fw-bold","mt-2"],["for","password",1,"fw-bold","text-capitalize"],["type","password","id","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"d-flex","align-items-center","justify-content-end","gap-3"],["routerLink","/forget",1,"link-primary"],["type","submit",1,"btn-main",3,"disabled"],[1,"fas","fa-spin","fa-spinner"],[1,"m-0"]],template:function(s,e){if(s&1&&(r(0,"section",0)(1,"h1",1),d(2,"Login Now:"),o(),r(3,"form",2),E("ngSubmit",function(){return e.loginSubmit()}),r(4,"div",3)(5,"label",4),d(6,"email:"),o(),C(7,"input",5),c(8,z,3,2,"div",6),o(),r(9,"div",3)(10,"label",7),d(11,"password:"),o(),C(12,"input",8),c(13,$,3,2,"div",6),o(),r(14,"div",9)(15,"a",10),d(16,"Forget password"),o(),r(17,"button",11),d(18,"Login "),c(19,H,1,0,"i",12),o()()()()),s&2){let l,p,a,g;m(3),f("formGroup",e.loginForm),m(4),f("ngClass",w(7,M,!((l=e.loginForm.get("email"))!=null&&l.errors)&&(((l=e.loginForm.get("email"))==null?null:l.touched)||((l=e.loginForm.get("email"))==null?null:l.dirty)),((l=e.loginForm.get("email"))==null?null:l.errors)&&(((l=e.loginForm.get("email"))==null?null:l.touched)||((l=e.loginForm.get("email"))==null?null:l.dirty)))),m(),u(8,(p=e.loginForm.get("email"))!=null&&p.errors&&((p=e.loginForm.get("email"))!=null&&p.touched||(p=e.loginForm.get("email"))!=null&&p.dirty)?8:-1),m(4),f("ngClass",w(10,M,!((a=e.loginForm.get("password"))!=null&&a.errors)&&(((a=e.loginForm.get("password"))==null?null:a.touched)||((a=e.loginForm.get("password"))==null?null:a.dirty)),((a=e.loginForm.get("password"))==null?null:a.errors)&&(((a=e.loginForm.get("password"))==null?null:a.touched)||((a=e.loginForm.get("password"))==null?null:a.dirty)))),m(),u(13,(g=e.loginForm.get("password"))!=null&&g.errors&&((g=e.loginForm.get("password"))!=null&&g.touched||(g=e.loginForm.get("password"))!=null&&g.dirty)?13:-1),m(4),f("disabled",e.loginForm.invalid||e.isLoading),m(2),u(19,e.isLoading?19:-1)}},dependencies:[B,A,x,q,k,D,R,b,T]});let i=t;return i})();export{Z as LoginComponent};
